<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}"
      layout:fragment="Content">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>UpConstruction Bootstrap Template - Contact</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Roboto:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->


  <!-- Template Main CSS File -->

  <!-- =======================================================
  * Template Name: UpConstruction
  * Updated: Sep 18 2023 with Bootstrap v5.3.2
  * Template URL: https://bootstrapmade.com/upconstruction-bootstrap-construction-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->

  <script th:inline="javascript" type="text/javascript">
    const checkSend = () => {
      let emailPattern = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      let email = $('#EMAIL_ADDR').val()
      if ($('#COMPANY_NM').val() == '' || $('#COMPANY_NM').val() == null) {
        alert("회사명은 필수 값 입니다.")
        return false;
      }

      if (!emailPattern.test(email)) {
        $('#EMAIL_ADDR').focus();
        $('#EMAIL_ADDR').css('background-color', 'aliceblue')
        alert('옳바른 이메일 형식을 입력하세요')
        return false;
      }

      var confirmation = confirm("제출 하시겠습니까?");
      if (confirmation) {
        $("#loginForm").submit();
        alert('제출 완료되었습니다')
      }
    }


    function formCheck() {
      let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      let email = $('#EMAIL_ADDR').val()
      if ($('#COMPANY_NM').val() =='' || $('#COMPANY_NM').val() ==null) {
        alert("회사명은 필수 값 입니다.")
        return false;
      }
        if (email=='' || email ==null) {
        alert("이메일을 입력해주세요.")
        return false;
      }
      if(emailPattern.test(email)) {
        $('#EMAIL_ADDR').focus();
      }
    }
    const selectFile = (element) => {
      const file = element.files[0];
      const filename = element.closest('.file_input').firstElementChild;
      // 1. 파일 선택 창에서 취소 버튼이 클릭된 경우
      if ( !file ) {
        filename.value = '';
        return false;
      }

      // 2. 파일 크기가 10MB를 초과하는 경우
      const fileSize = Math.floor(file.size / 1024 / 1024);
      if (fileSize > 10) {
        alert('10MB 이하의 파일로 업로드해 주세요.');
        filename.value = '';
        element.value = '';
        return false;
      }

      // 3. 파일명 지정
      filename.value = file.name;
    }


    // 파일 추가
    const addFile =() => {
      const fileDiv = document.createElement('div');
      fileDiv.innerHTML =`
            <div class="file_input">
                <input type="text" readonly  class="form-control"/>
                <label> 첨부파일
                    <input type="file" name="files" onchange="selectFile(this);" />
                </label>
            </div>
            <button type="button" onclick="removeFile(this);" class="btns del_btn"><span>삭제</span></button>
        `;
      document.querySelector('.file_list').appendChild(fileDiv);
    }


    // 파일 삭제
    const removeFile =(element) => {
      const fileAddBtn = element.nextElementSibling;
      if (fileAddBtn) {
        const inputs = element.previousElementSibling.querySelectorAll('input');
        console.log(inputs)
        inputs.forEach(input => input.value = '')
        return false;
      }
      element.parentElement.remove();
    }

  </script>
</head>

<body>


  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs d-flex align-items-center" style="background-image: url('/bootstrap/img/breadcrumbs-bg.jpg');">
      <div class="container position-relative d-flex flex-column align-items-center" data-aos="fade">

        <h2>Contact</h2>
        <ol>
          <li><a href="index.bak">Home</a></li>
          <li>Contact</li>
        </ol>

      </div>
    </div><!-- End Breadcrumbs -->

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">
          <div class="col-lg-6">
            <div class="info-item  d-flex flex-column justify-content-center align-items-center">
              <i class="bi bi-map"></i>
              <h3>Our Address</h3>
              <p>A108 Adam Street, New York, NY 535022</p>
            </div>
          </div><!-- End Info Item -->

          <div class="col-lg-3 col-md-6">
            <div class="info-item d-flex flex-column justify-content-center align-items-center">
              <i class="bi bi-envelope"></i>
              <h3>Email Us</h3>
              <p>contact@example.com</p>
            </div>
          </div><!-- End Info Item -->

          <div class="col-lg-3 col-md-6">
            <div class="info-item  d-flex flex-column justify-content-center align-items-center">
              <i class="bi bi-telephone"></i>
              <h3>Call Us</h3>
              <p>+1 5589 55488 55</p>
            </div>
          </div><!-- End Info Item -->

        </div>

        <div class="row gy-4 mt-1">

<!--          <div class="col-lg-6 ">-->
<!--            <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12097.433213460943!2d-74.0062269!3d40.7101282!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xb89d1fe6bc499443!2sDowntown+Conference+Center!5e0!3m2!1smk!2sbg!4v1539943755621" frameborder="0" style="border:0; width: 100%; height: 384px;" allowfullscreen></iframe>-->
<!--          </div>&lt;!&ndash; End Google Maps &ndash;&gt;-->

          <div class="col-lg-6" style="width:100%;">
            <form th:action="@{/question/insertQA}" id = "loginForm" method="post" role="form" class="php-email-form"   autocomplete="off" enctype="multipart/form-data">
              <input type="hidden" th:name="_csrf" th:value="${_csrf.token}"/>
              <div class="row">
                <div class="col-md-6 form-group">
                  <input type="text" name="COMPANY_NM" class="form-control" id="COMPANY_NM" placeholder="회사명" required="">
                </div>
                <div class="col-md-6 form-group mt-3 mt-md-0">
                  <input type="email" class="form-control" name="EMAIL_ADDR" id="EMAIL_ADDR" placeholder="Your Email" required autofocus >
                </div>
              </div>
              <div class="form-group mt-3">
                <input type="text" class="form-control" name="SUBJECT" id="SUBJECT" placeholder="Subject" required="">
              </div>
              <div class="form-group mt-3">
                <textarea class="form-control" name="MESSAGE" rows="5" placeholder="MESSAGE" required=""></textarea>
              </div>
              <div class="my-3">
                <div class="loading">Loading</div>
                <div class="error-message"></div>
                <div class="sent-message">Your message has been sent. Thank you!</div>
              </div>
                  <div class="file_list">
                      <div class="file_input">
                        <input type="text" readonly  class="form-control"/>
                        <label> 첨부파일
                          <input type="file" name="files" onchange="selectFile(this);" />
                        </label>
                        <button type="button" onclick="removeFile(this);" class="btns del_btn"><span>삭제</span></button>
                        <button type="button" onclick="addFile();" class="btns fn_add_btn"><span>파일 추가</span></button>
                      </div>
                  </div>
              <div class="text-center"><button id ="sendQA" type="button" onclick ="checkSend()">Send Message</button></div>
            </form>
          </div><!-- End Contact Form -->

        </div>

      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <div id="preloader"></div>

  <!-- Vendor JS Files -->
</body>

</html>